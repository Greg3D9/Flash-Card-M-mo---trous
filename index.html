<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastery Internship - Premium Edition</title>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --iphone-green: #34C759;
            --iphone-blue: #007AFF;
            --glass: rgba(255, 255, 255, 0.9);
            --text-main: #2d3436;
        }

        body { 
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; 
            background: #f0f3f8;
            background-image: radial-gradient(#d1d9e6 1px, transparent 1px);
            background-size: 20px 20px;
            display: flex; flex-direction: column; align-items: center; 
            min-height: 100vh; margin: 0; padding: 20px;
            color: var(--text-main);
            transition: all 0.5s ease;
        }

        /* --- HEADER & SWITCH --- */
        .top-header {
            width: 100%; max-width: 900px;
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 30px; padding: 10px 20px;
            background: var(--glass); backdrop-filter: blur(10px);
            border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .logo { font-weight: 800; font-size: 1.2rem; background: var(--primary-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .switch-container { display: flex; align-items: center; gap: 10px; }
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #dfe6e9; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 22px; width: 22px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        input:checked + .slider { background: var(--iphone-green); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* --- CONTENEUR --- */
        .card-container { 
            width: 95%; max-width: 850px; background: white; border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); padding: 40px;
            position: relative; overflow: hidden;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card-container::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 8px;
            background: var(--primary-gradient);
        }

        /* --- BANQUE DE MOTS --- */
        .word-bank {
            background: #f8faff; padding: 25px; border-radius: 20px;
            margin-bottom: 30px; display: flex; flex-wrap: wrap; gap: 12px;
            justify-content: center; border: 2px dashed #e0e6ed;
        }

        .word-item {
            background: white; color: #4834d4; padding: 10px 20px;
            border-radius: 12px; font-weight: 700; cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid #e0e6ed; transition: all 0.2s;
        }
        .word-item:hover { transform: translateY(-3px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); border-color: #6c5ce7; }
        .word-item.selected { background: #4834d4; color: white; transform: scale(0.95); }
        .word-item.used { opacity: 0.2; transform: scale(0.8); pointer-events: none; }

        /* --- TEXTE --- */
        .quiz-content { font-size: 1.4rem; line-height: 2.6; color: #2d3436; margin: 20px 0; }

        .drop-zone {
            display: inline-flex; align-items: center; justify-content: center;
            min-width: 130px; min-height: 42px; border-radius: 10px;
            background: #f1f2f6; border: 2px solid #dfe4ea;
            margin: 0 6px; vertical-align: middle; transition: all 0.3s;
        }
        .drop-zone.filled { background: white; border-color: #6c5ce7; color: #6c5ce7; font-weight: 800; }

        /* --- FEEDBACK COLORS --- */
        .is-correct { background: #ebfaef !important; border-color: #2ecc71 !important; color: #27ae60 !important; }
        .is-incorrect { background: #fff5f5 !important; border-color: #ff7675 !important; color: #d63031 !important; animation: shake 0.4s; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-6px); } 75% { transform: translateX(6px); } }

        /* --- CONTROLES --- */
        .controls { display: flex; gap: 15px; margin-top: 30px; flex-wrap: wrap; }
        
        .main-btn { 
            background: var(--primary-gradient); color: white; 
            padding: 18px; border: none; border-radius: 18px; font-weight: 800;
            font-size: 1.1rem; flex: 2; cursor: pointer; box-shadow: 0 10px 20px rgba(118, 75, 162, 0.3);
            transition: all 0.3s;
        }
        .main-btn:hover { transform: translateY(-2px); box-shadow: 0 15px 25px rgba(118, 75, 162, 0.4); }

        .side-btn { 
            background: white; color: #636e72; border: 2px solid #dfe6e9;
            width: 60px; height: 60px; border-radius: 18px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; font-size: 1.2rem;
            transition: all 0.2s;
        }
        .side-btn:hover { background: #f1f2f6; border-color: #b2bec3; }

        /* --- MOBILE MODE --- */
        body.mobile-mode { background: #f2f2f7; }
        body.mobile-mode .card-container { max-width: 420px; padding: 25px; border-radius: 40px; }
        body.mobile-mode .main-btn { border-radius: 20px; }
    </style>
</head>
<body>

    <div class="top-header">
        <div class="logo">üöÄ Pro-Internship</div>
        <div class="switch-container">
            <span style="font-size: 0.8rem; font-weight: 700; color: #636e72;">MODE IPHONE</span>
            <label class="switch">
                <input type="checkbox" id="mode-toggle" onchange="toggleMode()">
                <span class="slider"></span>
            </label>
        </div>
    </div>

    <div class="card-container">
        <div id="part-label" style="color: #a29bfe; font-weight: 800; letter-spacing: 1px; margin-bottom: 5px;">CHAPTER 01</div>
        <h3 id="part-title" style="margin-top:0; font-size: 1.8rem; color: #2d3436;">Introduction</h3>
        
        <div class="word-bank" id="word-bank" ondrop="dropToBank(event)" ondragover="allowDrop(event)"></div>

        <div id="quiz-text" class="quiz-content"></div>

        <div class="controls">
            <button class="main-btn" onclick="validate()">V√âRIFIER MES R√âPONSES</button>
            <div style="display: flex; gap: 10px; width: 100%;">
                <button class="side-btn" onclick="changePart(-1)">‚ùÆ</button>
                <button class="side-btn" style="color: #a777e3;" onclick="speakFull()">üîä</button>
                <button class="side-btn" onclick="changePart(1)">‚ùØ</button>
            </div>
        </div>
    </div>

    <script>
        // (Le script reste identique au pr√©c√©dent pour la logique, 
        // j'ai juste mis √† jour l'affichage de "CHAPTER XX")
        const data = [
            { t: "Introduction", content: "Today, I am going to present my internship, a technical document, and two articles. This presentation is about my professional experience and what I learned about mechanical design and vehicle safety." },
            { t: "The company", content: "I did my internship in a mechanical design company that works on vehicle components and systems. During my internship, I discovered how an industrial company is organised and how different departments work together. I observed engineers and learned how projects, safety, and quality are managed." },
            { t: "What I learned", content: "I observed mechanical components, technical drawings, and manufacturing constraints. Engineers must consider material strength, thermal constraints, maintenance, and safety. This internship showed me that braking systems are essential for vehicle safety and performance." },
            { t: "Technical document", content: "The technical document I studied is called Advantages of TELMA Retarders. Telma produces electromagnetic retarders for heavy vehicles. This document explains how retarders improve braking safety, efficiency, and reduce environmental impact." },
            { t: "What is a retarder", content: "A retarder helps a vehicle slow down without using the main braking system. It works with a magnetic field and creates braking force without friction. As a result, brakes last longer and are safer, especially for trucks and buses." },
            { t: "Technical results", content: "Telma retarders stabilise speed and reduce stopping distance. They prevent brake overheating and remain effective in many driving conditions. They also reduce friction and particle emissions." },
            { t: "Article 1", content: "The first article is called Braking to avoid pollution. It explains that brake dust is harmful to health. Electric vehicles reduce brake wear thanks to regenerative braking. The European Union will soon limit brake emissions." },
            { t: "Article 2", content: "The second article is called Will new greener brake pads be more expensive?. Eco-friendly brake pads use new materials without harmful metals. They reduce pollution, noise, and brake wear." },
            { t: "Link with internship", content: "These documents helped me better understand what I observed during my internship. They show that engineers must combine safety, performance, and environmental constraints in mechanical design." },
            { t: "Conclusion", content: "To conclude, my internship and these documents show the importance of mechanical design. Mechanical design improves vehicle safety, performance, and durability while reducing environmental impact. Telma retarders and eco-friendly brakes are good examples of efficient and responsible solutions." },
            { t: "Ending", content: "Thank you for your attention." }
        ];

        let currentIdx = 0;
        let isMobileMode = false;
        let selectedWordText = null;
        let selectedWordElement = null;

        function toggleMode() {
            isMobileMode = document.getElementById('mode-toggle').checked;
            document.body.classList.toggle('mobile-mode', isMobileMode);
            initQuiz();
        }

        function initQuiz() {
            window.speechSynthesis.cancel();
            selectedWordText = null;
            selectedWordElement = null;
            const part = data[currentIdx];
            document.getElementById('part-title').innerText = part.t;
            document.getElementById('part-label').innerText = `CHAPTER ${String(currentIdx + 1).padStart(2, '0')}`;
            
            const words = part.content.split(' ');
            let selectedIndices = [];
            for (let i = 0; i < words.length; i++) {
                let clean = words[i].replace(/[.,]/g,"");
                if (clean.length > 4) {
                    let lastSelected = selectedIndices.length > 0 ? selectedIndices[selectedIndices.length - 1] : -5;
                    if (i - lastSelected > 2) {
                        if (Math.random() > 0.3) selectedIndices.push(i);
                    }
                }
                if (selectedIndices.length >= 7) break;
            }
            
            let displayHTML = "";
            let bankWords = [];
            words.forEach((word, index) => {
                let cleanWord = word.replace(/[.,?!‚Äù‚Äú]/g,"");
                if (selectedIndices.includes(index)) {
                    displayHTML += `<span class="drop-zone" data-answer="${cleanWord.toLowerCase()}" ondrop="dropToZone(event)" ondragover="allowDrop(event)" onclick="handleZoneClick(this)"></span>${word.match(/[.,]/) || ""} `;
                    bankWords.push(cleanWord);
                } else {
                    displayHTML += word + " ";
                }
            });

            document.getElementById('quiz-text').innerHTML = displayHTML;
            const bank = document.getElementById('word-bank');
            bank.innerHTML = "";
            bankWords.sort(() => 0.5 - Math.random()).forEach((w, i) => {
                const span = document.createElement('span');
                span.className = 'word-item';
                span.innerText = w;
                span.id = "word-" + i;
                span.draggable = !isMobileMode;
                span.ondragstart = (e) => { e.dataTransfer.setData("text", e.target.id); };
                span.onclick = function() { if(isMobileMode) handleWordClick(this); };
                bank.appendChild(span);
            });
        }

        // --- Logique identique aux versions pr√©c√©dentes ---
        function handleWordClick(el) {
            document.querySelectorAll('.word-item').forEach(w => w.classList.remove('selected'));
            if (selectedWordElement === el) { selectedWordElement = null; selectedWordText = null; }
            else { el.classList.add('selected'); selectedWordElement = el; selectedWordText = el.innerText; }
        }
        function handleZoneClick(zone) {
            if (!isMobileMode) return;
            if (selectedWordText) {
                if (zone.innerText !== "") {
                    const old = zone.innerText;
                    document.querySelectorAll('.word-item').forEach(w => { if(w.innerText === old) w.classList.remove('used'); });
                }
                zone.innerText = selectedWordText; zone.classList.add('filled');
                selectedWordElement.classList.add('used'); selectedWordElement.classList.remove('selected');
                selectedWordElement = null; selectedWordText = null;
            } else if (zone.innerText !== "") {
                const old = zone.innerText;
                document.querySelectorAll('.word-item').forEach(w => { if(w.innerText === old) w.classList.remove('used'); });
                zone.innerText = ""; zone.classList.remove('filled');
            }
        }
        function allowDrop(e) { e.preventDefault(); }
        function dropToZone(e) {
            e.preventDefault(); if (isMobileMode) return;
            const dataId = e.dataTransfer.getData("text");
            const dragged = document.getElementById(dataId);
            if (e.target.classList.contains('drop-zone') && e.target.children.length === 0) {
                e.target.appendChild(dragged); e.target.classList.add('filled');
            }
        }
        function dropToBank(e) {
            e.preventDefault(); if (isMobileMode) return;
            const dataId = e.dataTransfer.getData("text");
            const el = document.getElementById(dataId);
            if(el.parentNode.classList.contains('drop-zone')) el.parentNode.classList.remove('filled');
            document.getElementById('word-bank').appendChild(el);
        }
        function validate() {
            document.querySelectorAll('.drop-zone').forEach(zone => {
                const text = zone.innerText || (zone.children[0] ? zone.children[0].innerText : "");
                if (text !== "") {
                    const isOk = text.trim().toLowerCase() === zone.getAttribute('data-answer');
                    zone.className = `drop-zone filled ${isOk ? 'is-correct' : 'is-incorrect'}`;
                }
            });
        }
        function changePart(dir) { currentIdx = (currentIdx + dir + data.length) % data.length; initQuiz(); }
        function speakFull() {
            window.speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(data[currentIdx].content);
            utterance.lang = 'en-US'; utterance.rate = 0.8;
            window.speechSynthesis.speak(utterance);
        }
        initQuiz();
    </script>
</body>
</html>
